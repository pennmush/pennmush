#summary How to build PennMUSH on Windows.

= Introduction =

Requireents:
  * ActivePerl
  * CMake
  * Git for Windows
  * Visual Studio 2010 (express edition works)
  * Windows 2000 or newer.

= Details =

== Build OpenSSL ==
Grab the sources from http://openssl.org, unpack it, and `cd` into the directory. Full directions are available in `INSTALL.W32`, but you'll want to do something like this:
{{{
perl Configure VC-WIN32 no-asm
ms\do_ms
nmake -f ms\ntdll.mak
}}}

== Build PCRE ==
Grab the sources, unpack it, and `cd` into the directory.
{{{
cmake .
}}}
Open `ALL_BUILD.vcproj`, and build the appropriate configuration (you probably want Release).

== Buil PennMUSH ==
Open the VS2010 project in `win32\vs2010`, and add the following paths to your include path:
{{{
path-to-openssl\inc32
path-to-pcre
}}}

Add the following to your library search path:
{{{
path-to-openssl\out32dll
path-to-pcre\Release
}}}

And finally add the following to additional libraries:
{{{
pcre.lib
ssleay32.lib
libeay32.lib
}}}

At some point, the compile will complain with the error that `'next_timeout' uses undefined struct 'timeval'` in `dt1s1.h`. This is because OpenSSL tries to `#include` the `winsock.h` header, which is incompatible with `winsock2.h` (which PennMUSH uses). To fix that, just change the include in OpenSSL from `#include <winsock.h>` to `#include <winsock2.h>`.